<div class="form-container">
  <h3 class="form-title">{{ item ? 'Edit' : 'Create' }} {{ form.get('type')?.value === itemType.TASK ? 'Task' : 'Event' }}</h3>
  
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="agenda-form">
    <div class="form-group">
      <label for="title">Title *</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title" 
        class="form-control"
        [class.is-invalid]="form.get('title')?.invalid && form.get('title')?.touched"
      >
      <div class="invalid-feedback" *ngIf="form.get('title')?.errors?.['required'] && form.get('title')?.touched">
        Title is required
      </div>
    </div>
    
    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        formControlName="description" 
        class="form-control"
        rows="3"
      ></textarea>
    </div>
    
    <div class="form-group">
      <label for="type">Type *</label>
      <select id="type" formControlName="type" class="form-control">
        <option [value]="itemType.TASK">Task</option>
        <option [value]="itemType.EVENT">Event</option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="date">Date *</label>
      <input 
        type="date" 
        id="date" 
        formControlName="date" 
        class="form-control"
        [class.is-invalid]="form.get('date')?.invalid && form.get('date')?.touched"
      >
    </div>
    
    <div class="form-group">
      <label for="priority">Priority</label>
      <select id="priority" formControlName="priority" class="form-control">
        <option [value]="priority.LOW">Low</option>
        <option [value]="priority.MEDIUM">Medium</option>
        <option [value]="priority.HIGH">High</option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="categoryId">Category</label>
      <select id="categoryId" formControlName="categoryId" class="form-control">
        <option [value]="null">No Category</option>
        <option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
    </div>
    
    <div class="form-group">
      <label for="reminder">Reminder (optional)</label>
      <input 
        type="datetime-local" 
        id="reminder" 
        formControlName="reminder" 
        class="form-control"
      >
    </div>
    
    <!-- Task-specific fields -->
    <div *ngIf="form.get('type')?.value === itemType.TASK">
      <div class="form-group">
        <label for="deadline">Deadline (optional)</label>
        <input 
          type="date" 
          id="deadline" 
          formControlName="deadline" 
          class="form-control"
        >
      </div>
      
      <div class="form-check">
        <input 
          type="checkbox" 
          id="completed" 
          formControlName="completed" 
          class="form-check-input"
        >
        <label for="completed" class="form-check-label">Completed</label>
      </div>
    </div>
    
    <!-- Event-specific fields -->
    <div *ngIf="form.get('type')?.value === itemType.EVENT">
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="startTime">Start Time *</label>
          <input 
            type="time" 
            id="startTime" 
            formControlName="startTime" 
            class="form-control"
          >
        </div>
        
        <div class="form-group col-md-6">
          <label for="endTime">End Time *</label>
          <input 
            type="time" 
            id="endTime" 
            formControlName="endTime" 
            class="form-control"
          >
        </div>
      </div>
      
      <div class="form-group">
        <label for="location">Location</label>
        <input 
          type="text" 
          id="location" 
          formControlName="location" 
          class="form-control"
        >
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Save</button>
    </div>
  </form>
</div>